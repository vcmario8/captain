# 大厂面试突围指南：穿透语言的核心原理

候选人说我是学 xxx 语言的，不说减分，肯定是不加分的。

计算机是系统工程，语言是最外层的壳，不同的语言之间背后的原理大同小异。要在面试中脱颖而出，需要掌握需要背后的原理。

## 比如内存回收 gc

c++程序员要自己释放，如果提前释放会 coredump，如果不释放就会内存泄漏，所以程序员要对分配和使用内存的地方非常清楚。golang/java本身有 gc，三色标记，分代回收，语言会维护一套状态，便于标记，计数，回收。当然更复杂效率更低，而且回收状态有阻塞风险（stop the world）。这是考察程序员对内存的理解，未来持续会有新语言出来，但内存管理机制还是这一套。不能说 cpp 程序不懂 gc，而是 cpp 更有性价比。

## 比如服务器的请求处理处理

接受网络请求和实际处理逻辑是两个子步骤，前者不能阻塞不然用户请求进不来，后者是cpu 密集型处理时间长，不同语言都有各自的处理方案。

c++ 程序员对网络线程和处理线程敏感，会提前规划好。多线程之间有通信和竞争的开销，需要配置通信缓存大小，处理线程数等，在并发度和系统开销间做权衡。处理线程多了竞争的开销不低，线程少了cpu 不能被跑满。

处理线程会阻塞，需要在语言层面pending主动让出cpu ，由此诞生了很多异步编程框架，异步带来代码实现的隔断，可读性一直被诟病。

golang 在用户编程侧通过语法糖go把这部分用gmp机制给简化了，g 是协程，m 是内核线程，p 是协调这两者的信使。本质上就是一套算法，让有限的 m 尽可能处理更多 g，为了不让 m 空着，有一些兜底机制比如去偷 g，或者从全局队列拿 g。因此网络线程和处理线程在 golang 中就是普通的 g 而已，需要关注的就是 p 和 cpu 的对应关系即可。go 程序员上手快，编码效率高，不容易写出太烂的代码。

## c 和 cpp

c 更原始但背后还是有相似的原理。cpp 的多态本质是想抽象现实的事物，完成建模和代码复用。实现上通过维护虚表，动态调用不同函数从而达到代码复用，语法层面只需要通过虚类就实现了。而 c 中通过 void 指针和类型转换就可以实现了这套机制。因此不能说 c 程序要没有面向对象思维。有没有对象和语言没关系。

掌握原理后再学习新语言，就像熟悉了虚类模板后去实例化一个对象，非常简单。