# 聊聊校招面试基础——进程/内存

帮大家理思路，争取早日拿offer。

网上八股非常多，而且现在llm知识量已经爆炸了，不建议去背细节；工作/项目中涉及到后再去深挖学习微观。

## 协程/线程/进程

分成基础概念、应用、进阶几部分；基础概念就是八股了，资源分配、三者的关系；golang/c++的协程原语和原理，比如golang的gmp 模型；进阶一般是并发、通信。

### 并发

本质上就是 aba 问题的同步机制（互斥锁/信号量/内存屏障），往下拓展到微观就是多cpu协作的并发，往上拓展宏观就是分布式数据一致性（cache aside、read/write through、write back）问题。

### 通信

就是数据协作了，单机的进程可以通过pipe/共享内存/socket/本地文件来协作；跨机进程可以通过 socket 、云端文件系统来实现；往上拓展宏观就是分布式节点协作问题了。

## 内存

本质上是时分复用物理资源，程序运行有局部效应，只需要加载运行需要的必要资源到内存就行了，其余的留在磁盘中，运行时发现少资源时，陷入中断通知 cpu 把磁盘中数据加载数据到内存；每个进程看起来就是连续不中断任务。主要关注内存地址映射、内存组织管理两类问题。

### 内存地址映射

解决内存和磁盘交互问题，具体实现方式就是分页、分段机制。cpu 的 L1/2/3 和内存也存在类似的机制，需要交换数据，解决多 CPU 的并发问题（cas、writeback）、解决地址映射问题（直接映射、组相联、全相联）；本质上解决的问题是让更少的资源缓存更多的数据，减少去慢介质的 io 时间。

### 内存组织管理

解决高效利用问题，和高级语言的 gc 有点像，需要解决频繁分配、碎片、泄露问题；伙伴系统分配大内存，slab分配小内存，预分配、定时回收碎片；对应用层暴露 brk 接口，上层语言区分 c/c++、其他，c/c++要自己组织内存的生命周期，其他语言有 gc 系统托管；虚拟内存又有一套内存空间的约定，代码段、数据段、堆、栈等。

## 文件系统

是管理磁盘的。你要存储文件、管理文件（查看文件夹列表、复制文件、权限管理）；操作系统几乎都是按照索引（ inode）+物理数据来组织，对应用成提供 fileoperation的 api；操作系统的实现比较大而全，存储团队一般定制自己的文件系统。